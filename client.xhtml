<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Visual Computer Journal Demo: Client</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <!-- jQuery simplifies Web/JavaScript development -->
        <script type="text/javascript" src="externals/jquery/jquery-1.7.1.js"></script>

        <!-- KataJS simplifies development of the Sirikata ObjectHost in the browser -->
        <script type="text/javascript" src="externals/katajs/katajs/core/Core.js"></script>

        <!-- configuration -->
        <script type="text/javascript" src="config.js" />

        <!-- main script -->
        <script type="text/javascript"><![CDATA[
            $(window).load(function() {
                Kata.require([
                    'katajs/oh/MainThread.js', // to create MainThread object
                    'katajs/gfx/xml3dgfx.js', // XML3D Graphics Simulation
                    'katajs/oh/plugins/sirikata/SirikataSpaceConnection.js', // to use sirikata://.../ protocol
                    'katajs/oh/plugins/loop/LoopbackSpaceConnection.js', // to use loop://.../ protocol
                ], function() {
                    Kata.GraphicsSimulation.initializeDriver("XML3D", emptyMesh, function() {
                        kata = new Kata.MainThread(
                            kata_base_offset + "scripts/AvatarScript.js",
                            "VisComp.AvatarScript",
                            {
                                space: spaceServer,
                                loc: {
                                    scale: [0, 0, 0, 1],
                                    //pos: [20, 200.1, 2000],
                                    pos: [1394.2814845245375, 1057.8625582707273, 0.09957743131091168],
                                    orient: [0.7050493008568176, 0.05011303702861959, 0.05007314655527848, 0.705610974174251],
                                },
                                visual: {
                                    mesh: "cdn/prop/amber.xml3d"
                                }
                            }
                        );
                        graphics = new Kata.GraphicsSimulation("XML3D", kata.getChannel(), document.getElementById("view"));
                    });
                });
            });
            
            // dummy functions to decrease errors reported to the console
            function handleOnMouseOver() {}
            function handleOnMouseOut() {}
            function handleOnClick() {}
            function handleOnDblClick() {}
            function handleOnMouseMove() {}
        ]]></script>

        <!-- Load style for the viewer interface -->
        <link type="text/css" href="style/style-common.css" rel="stylesheet" media="all" />
        <link type="text/css" href="style/style-client.css" rel="stylesheet" media="all" />
    </head>
    <body>
        <div id="view" />
    </body>
</html>
