<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Visual Computer Journal Demo: Tile Server</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <!-- jQuery simplifies Web/JavaScript development -->
        <script type="text/javascript" src="externals/jquery/jquery-1.7.1.js"></script>

        <!-- KataJS simplifies development of the Sirikata ObjectHost in the browser -->
        <script type="text/javascript" src="externals/katajs/katajs/core/Core.js"></script>

        <!-- configuration -->
        <script type="text/javascript" src="config.js" />

        <!-- main script -->
        <script type="text/javascript"><![CDATA[
            $(window).load(function() {
                Kata.require([
                    'katajs/oh/MainThread.js', // to create MainThread object
                    'katajs/oh/plugins/sirikata/SirikataSpaceConnection.js', // to use sirikata://.../ protocol
                    'katajs/oh/plugins/loop/LoopbackSpaceConnection.js', // to use loop://.../ protocol
                ], function() {
                    kata = new Kata.MainThread(
                        kata_base_offset + "scripts/TileManagerScript.js",
                            "VisComp.TileManagerScript",
                            {
                                space: spaceServer,
                                logContainerId: "log",
                                mapServer: "http://localhost/devenv3/citygml-xml3d/xml3d-gis_current/httpdocs/sirikataconnect.php",
                                //area: {minx: 17020, maxx: 17021, miny: 11220, maxy: 11221},
                                //area: {minx: 17021, maxx: 17021, miny: 11221, maxy: 11221},
                                controls: {
                                    layers: "controls_layers",
                                    area: {
                                        minX: "controls_minX",
                                        maxX: "controls_maxX",
                                        minY: "controls_minY",
                                        maxY: "controls_maxY"
                                    },
                                    zoom: "controls_zoom",
                                    aggregate: "controls_aggregate",
                                    create: "controls_create"
                                },
                            }
                        );
                });
            });
        ]]></script>

        <!-- Load style for the viewer interface -->
        <link type="text/css" href="style/style-common.css" rel="stylesheet" media="all" />
        <link type="text/css" href="style/style-server.css" rel="stylesheet" media="all" />
    </head>
    <body>
        <div id="controls">
            <div id="controls_layers" />
            <hr width="90%"/>
            <table class="tilearea">
                <tr>
                    <td class="tilearea_label"><label for="controls_minX">min X: </label></td>
                    <td><input type="text" id="controls_minX" disabled="disabled" value="17020" /></td>
                </tr>
                <tr>
                    <td class="tilearea_label"><label for="controls_maxX">max X: </label></td>
                    <td><input type="text" id="controls_maxX" disabled="disabled" value="17020" /></td>
                </tr>
                <tr>
                    <td class="tilearea_label"><label for="controls_minY">min Y: </label></td>
                    <td><input type="text" id="controls_minY" disabled="disabled" value="11220" /></td>
                </tr>
                <tr>
                    <td class="tilearea_label"><label for="controls_maxY">max Y: </label></td>
                    <td><input type="text" id="controls_maxY" disabled="disabled" value="11220" /></td>
                </tr>
                <tr>
                    <td class="tilearea_label"><label for="controls_zoom">zoom: </label></td>
                    <td><input type="text" id="controls_zoom" disabled="disabled" value="15" /></td>
                </tr>
            </table>
            <hr width="90%" />
            <div class="aggregate">
                <input type="checkbox" id="controls_aggregate" disabled="disabled" checked="checked" />
                <label for="controls_aggregate">aggregate layers into one object</label>
            </div>
            <hr width="90%"/>
            <button id="controls_create" disabled="disabled">Create tile objects</button>
        </div>
        <div id="log" />
    </body>
</html>