<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Visual Computer Journal Demo: Tile Server</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <!-- jQuery simplifies Web/JavaScript development -->
        <script type="text/javascript" src="externals/jquery/jquery-1.7.1.js"></script>

        <!-- KataJS simplifies development of the Sirikata ObjectHost in the browser -->
        <script type="text/javascript" src="externals/katajs/katajs/core/Core.js"></script>

        <!-- configuration -->
        <script type="text/javascript" src="config.js" />

        <!-- main script -->
        <script type="text/javascript"><![CDATA[
            $(window).load(function() {
                Kata.require([
                    'katajs/oh/MainThread.js', // to create MainThread object
                    'katajs/oh/plugins/sirikata/SirikataSpaceConnection.js', // to use sirikata://.../ protocol
                    'katajs/oh/plugins/loop/LoopbackSpaceConnection.js', // to use loop://.../ protocol
                ], function() {
                    kata = new Kata.MainThread(
                        kata_base_offset + "scripts/TileManagerScript.js",
                            "VisComp.TileManagerScript",
                            {
                                space: spaceServer,
                                logContainerId: "log",
                                controlsContainerId: "controls",
                                mapServer: "http://localhost/devenv3/citygml-xml3d/xml3d-gis_current/httpdocs/sirikataconnect.php",
                                //area: {minx: 17020, maxx: 17021, miny: 11220, maxy: 11221},
                                //area: {minx: 17021, maxx: 17021, miny: 11221, maxy: 11221},
                                defaultArea: {minX: 17020, maxX: 17020, minY: 11220, maxY: 11220},
                                defaultZoom: 15,
                                aggregateLayers: true,
                            }
                        );
                });
            });
        ]]></script>
        
        <!-- Load style for the viewer interface -->
        <link type="text/css" href="style/style-common.css" rel="stylesheet" media="all" />
        <link type="text/css" href="style/style-server.css" rel="stylesheet" media="all" />
    </head>
    <body>
        <div id="controls">
            <hr width="90%"/>
            <div class="tilearea">
                <div>
                    min X: <input type="text" id="controls_minX" disabled="disabled" />
                </div>
                <div>
                    max X: <input type="text" id="controls_maxX" disabled="disabled" />
                </div>
                <div>
                    min Y: <input type="text" id="controls_minY" disabled="disabled" />
                </div>
                <div>
                    max Y: <input type="text" id="controls_maxY" disabled="disabled" />
                </div>
            </div>
            <hr width="90%"/>
            <button id="controls_create" disabled="disabled">Create tile objects</button>
        </div>
        <div id="log" />
    </body>
</html>